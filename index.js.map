{"version":3,"file":"index.js","sources":["../src/js/render-functions.js","../src/js/pixabay-api.js","../src/main.js"],"sourcesContent":["import SimpleLightbox from \"simplelightbox\";\r\nimport \"simplelightbox/dist/simple-lightbox.min.css\";\r\n\r\nfunction generateMarkup(images) {\r\n    return images\r\n        .map(({ webformatURL, largeImageURL, tags, likes, views, comments, downloads })  => {\r\n        \r\n        return `\r\n        <li class=\"photo-card\">\r\n    <a href=\"${largeImageURL}\">\r\n    <img class=\"photo-card-img\"\r\n    src=\"${webformatURL}\"\r\n    alt=\"${tags}\"\r\n    />\r\n</a>\r\n<div class=\"info\">\r\n        <p class=\"info-item\">\r\n            <span>Likes</span>\r\n            ${likes}\r\n        </p>\r\n        <p class=\"info-item\">\r\n            <span>Views</span>\r\n            ${views}\r\n        </p>\r\n        <p class=\"info-item\">\r\n            <span>Comments</span>\r\n            ${likes}\r\n        </p>\r\n        <p class=\"info-item\">\r\n            <span>Downloads</span>\r\n            ${downloads}\r\n        </p>\r\n    </div>\r\n</li>\r\n`;             \r\n        })\r\n    .join(\"\");\r\n}\r\n\r\n\r\nfunction renderImagesingallery(galleryMarkup, container) {\r\n    container.insertAdjacentHTML('beforeend', galleryMarkup);\r\n    let gallery = new SimpleLightbox('.gallery a', {\r\n            caption: true,\r\n            captionsData: 'alt',\r\n            captionPosition: 'bottom',\r\n            captionDelay: 250,\r\n    });\r\n\r\n    gallery.refresh()\r\n    gallery.on('show.simplelightbox');\r\n}\r\n\r\n\r\nexport {generateMarkup, renderImagesingallery};","import axios from 'axios';\r\n\r\nconst API_KEY = \"46939525-73ecae044838d7dfbbfadb664\";\r\nconst BASE_URL = \"https://pixabay.com/api/\"\r\n\r\nasync function fetchData(key_word, page=1) {\r\n    return await axios(BASE_URL, {\r\n        params: {\r\n        key: API_KEY,\r\n        page: page,\r\n        per_page: 15,\r\n        q: key_word,\r\n        image_type: \"photo\",\r\n        orientation: \"horizontal\",\r\n        safesearch: true\r\n    }})\r\n        \r\n}\r\n\r\nexport default fetchData;","import { generateMarkup, renderImagesingallery } from \"./js/render-functions\";\r\nimport fetchData from \"./js/pixabay-api\";\r\nimport iziToast from \"izitoast\";\r\nimport \"izitoast/dist/css/iziToast.min.css\";\r\n\r\nconst input = document.querySelector(\".search-field\");\r\nconst button = document.querySelector(\"button\");\r\nconst galleryContainer = document.querySelector(\".gallery\");\r\nconst loaderIconContainer = document.querySelector(\".loader-icon-container\");\r\nconst loadMore = document.querySelector(\".js-load-more\");\r\n\r\n\r\nlet page = 1;\r\nlet searchWord;\r\n\r\nbutton.addEventListener(\"click\", handleClick);\r\nloadMore.addEventListener(\"click\", handleLoadMore)\r\n\r\nasync function handleClick(event) {\r\n    event.preventDefault();\r\n    \r\n    loadMore.classList.add('load-more-hidden');\r\n    // Reset gallery\r\n    galleryContainer.innerHTML = \"\";\r\n    loaderIconContainer.classList.toggle(\"loader\");\r\n    searchWord = input.value.trim();\r\n    \r\n    try {\r\n        const { data } = await fetchData(searchWord, page);\r\n        const imagesArr = data.hits;\r\n\r\n        if (imagesArr.length === 0 || searchWord === '') {\r\n            iziToast.error({\r\n                message: \"Sorry, there are no images matching your search query. Please try again!\",\r\n                position: \"topRight\",\r\n            });\r\n        } else {\r\n            const galleryMarkup = generateMarkup(imagesArr);\r\n            renderImagesingallery(galleryMarkup, galleryContainer);\r\n            loadMore.classList.remove('load-more-hidden');\r\n        }\r\n    } catch (error) {\r\n        iziToast.error({\r\n            message: error.message,\r\n            position: \"topRight\",\r\n        });\r\n    } finally {\r\n        loaderIconContainer.classList.toggle(\"loader\");\r\n        input.value = \"\";\r\n    }\r\n}\r\n\r\n\r\nasync function handleLoadMore(event) {\r\n    event.preventDefault(); \r\n    scrollTopBtn.style.display = 'block';\r\n\r\n    loadMore.disabled = true;\r\n\r\n    page += 1;\r\n    loaderIconContainer.classList.toggle(\"loader\");\r\n\r\n    try {\r\n        const { data } = await fetchData(searchWord, page);\r\n        const imagesArr = data.hits;\r\n\r\n        if (data.totalHits <= page * 15) {\r\n            loadMore.classList.add('load-more-hidden');\r\n            iziToast.info({\r\n                message: \"We're sorry, but you've reached the end of search results.\",\r\n                position: \"topRight\",\r\n            });\r\n\r\n        } else {\r\n            const galleryMarkup = generateMarkup(imagesArr);\r\n            renderImagesingallery(galleryMarkup, galleryContainer);\r\n            const card = document.querySelector(\".photo-card\");\r\n            const cardHeight = card.getBoundingClientRect().height;\r\n            window.scrollBy({\r\n                left: 0,\r\n                top: cardHeight*2,\r\n                behavior: \"smooth\"\r\n        })\r\n        }\r\n    } catch (error) {\r\n        iziToast.error({\r\n            message: error.message,\r\n            position: \"topRight\",\r\n        });\r\n    } finally {\r\n        loaderIconContainer.classList.toggle(\"loader\");\r\n        loadMore.disabled = false;\r\n        \r\n    }\r\n    \r\n}\r\n\r\n"],"names":["generateMarkup","images","webformatURL","largeImageURL","tags","likes","views","comments","downloads","renderImagesingallery","galleryMarkup","container","gallery","SimpleLightbox","API_KEY","BASE_URL","fetchData","key_word","page","axios","input","button","galleryContainer","loaderIconContainer","loadMore","searchWord","handleClick","handleLoadMore","event","data","imagesArr","iziToast","error","cardHeight"],"mappings":"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"}