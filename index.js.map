{"version":3,"file":"index.js","sources":["../src/js/render-functions.js","../src/js/pixabay-api.js","../src/main.js"],"sourcesContent":["import SimpleLightbox from \"simplelightbox\";\r\nimport \"simplelightbox/dist/simple-lightbox.min.css\";\r\n\r\nfunction generateMarkup(images) {\r\n    return images\r\n        .map(({ webformatURL, largeImageURL, tags, likes, views, comments, downloads })  => {\r\n        \r\n        return `\r\n        <li class=\"photo-card\">\r\n    <a href=\"${largeImageURL}\">\r\n    <img class=\"photo-card-img\"\r\n    src=\"${webformatURL}\"\r\n    alt=\"${tags}\"\r\n    />\r\n</a>\r\n<div class=\"info\">\r\n        <p class=\"info-item\">\r\n            <span>Likes</span>\r\n            ${likes}\r\n        </p>\r\n        <p class=\"info-item\">\r\n            <span>Views</span>\r\n            ${views}\r\n        </p>\r\n        <p class=\"info-item\">\r\n            <span>Comments</span>\r\n            ${likes}\r\n        </p>\r\n        <p class=\"info-item\">\r\n            <span>Downloads</span>\r\n            ${downloads}\r\n        </p>\r\n    </div>\r\n</li>\r\n`;             \r\n        })\r\n    .join(\"\");\r\n}\r\n\r\n\r\nfunction renderImagesingallery(galleryMarkup, container) {\r\n    container.insertAdjacentHTML('beforeend', galleryMarkup);\r\n    let gallery = new SimpleLightbox('.gallery a', {\r\n            caption: true,\r\n            captionsData: 'alt',\r\n            captionPosition: 'bottom',\r\n            captionDelay: 250,\r\n    });\r\n\r\n    gallery.refresh()\r\n    gallery.on('show.simplelightbox');\r\n}\r\n\r\n\r\nexport {generateMarkup, renderImagesingallery};","import axios from 'axios';\r\n\r\nconst API_KEY = \"46939525-73ecae044838d7dfbbfadb664\";\r\nconst BASE_URL = \"https://pixabay.com/api/\"\r\n\r\nasync function fetchData(key_word, page=1) {\r\n    return await axios(BASE_URL, {\r\n        params: {\r\n        key: API_KEY,\r\n        page: page,\r\n        per_page: 15,\r\n        q: key_word,\r\n        image_type: \"photo\",\r\n        orientation: \"horizontal\",\r\n        safesearch: true\r\n    }})\r\n        \r\n}\r\n\r\nexport default fetchData;","import { generateMarkup, renderImagesingallery } from \"./js/render-functions\";\r\nimport fetchData from \"./js/pixabay-api\";\r\nimport iziToast from \"izitoast\";\r\nimport \"izitoast/dist/css/iziToast.min.css\";\r\n\r\nconst form = document.querySelector(\".searching-form\");\r\nconst galleryContainer = document.querySelector(\".gallery\");\r\nconst loaderIconContainer = document.querySelector(\".loader-icon-container\");\r\nconst loadMore = document.querySelector(\".js-load-more\");\r\nconst buttonContainer = document.querySelector(\".button-container\");\r\n\r\nlet page = 1;\r\nlet searchWord;\r\nlet totalHits;\r\n\r\nform.addEventListener(\"submit\", handleSubmit);\r\nloadMore.addEventListener(\"click\", handleLoadMore)\r\n\r\nasync function handleSubmit(event) {\r\n    event.preventDefault();\r\n    \r\n    buttonContainer.classList.add('load-more-hidden');\r\n    // Reset gallery\r\n    galleryContainer.innerHTML = \"\";\r\n    \r\n    searchWord = event.target.elements.search.value.trim();\r\n    \r\n    if (!searchWord) {\r\n        iziToast.error({\r\n            message: \"Please enter a keyword into the search field\",\r\n            position: \"topRight\",\r\n            timeout: 1500\r\n        });\r\n        return;\r\n    }\r\n\r\n    loaderIconContainer.classList.toggle(\"loader\");\r\n\r\n    try {\r\n        const { data } = await fetchData(searchWord, page);\r\n        const imagesArr = data.hits;\r\n\r\n        if (imagesArr.length === 0) {\r\n            iziToast.error({\r\n                message: \"Sorry, there are no images matching your search query. Please try again!\",\r\n                position: \"topRight\",\r\n                timeout: 1500\r\n            });\r\n        } else {\r\n            totalHits = data.totalHits\r\n            const galleryMarkup = generateMarkup(imagesArr);\r\n            renderImagesingallery(galleryMarkup, galleryContainer);\r\n            buttonContainer.classList.remove('load-more-hidden');\r\n        }\r\n    } catch (error) {\r\n        iziToast.error({\r\n            message: error.message,\r\n            position: \"topRight\",\r\n            timeout: 5000\r\n        });\r\n    } finally {\r\n        loaderIconContainer.classList.toggle(\"loader\");\r\n        event.target.elements.search.value = \"\";\r\n    }\r\n}\r\n\r\n\r\nasync function handleLoadMore(event) {\r\n    event.preventDefault(); \r\n    loadMore.disabled = true;\r\n\r\n    if (totalHits <= page * 15) {\r\n        buttonContainer.classList.add('load-more-hidden');\r\n        iziToast.info({\r\n            message: \"We're sorry, but you've reached the end of search results.\",\r\n            position: \"topRight\",\r\n        });\r\n        return;\r\n    }\r\n\r\n    page += 1;\r\n    loaderIconContainer.classList.toggle(\"loader\");\r\n\r\n    try {\r\n        const { data } = await fetchData(searchWord, page);\r\n        const imagesArr = data.hits;\r\n        totalHits = data.totalHits;\r\n        const galleryMarkup = generateMarkup(imagesArr);\r\n\r\n        renderImagesingallery(galleryMarkup, galleryContainer);\r\n\r\n        const card = document.querySelector(\".photo-card\");\r\n        const cardHeight = card.getBoundingClientRect().height;\r\n        window.scrollBy({\r\n                left: 0,\r\n                top: cardHeight*2,\r\n                behavior: \"smooth\"\r\n        })\r\n    } catch (error) {\r\n        iziToast.error({\r\n            message: error.message,\r\n            position: \"topRight\",\r\n        });\r\n    } finally {\r\n        loaderIconContainer.classList.toggle(\"loader\");\r\n        loadMore.disabled = false; \r\n    }\r\n}\r\n\r\n"],"names":["generateMarkup","images","webformatURL","largeImageURL","tags","likes","views","comments","downloads","renderImagesingallery","galleryMarkup","container","gallery","SimpleLightbox","API_KEY","BASE_URL","fetchData","key_word","page","axios","form","galleryContainer","loaderIconContainer","loadMore","buttonContainer","searchWord","totalHits","handleSubmit","handleLoadMore","event","iziToast","data","imagesArr","error","cardHeight"],"mappings":"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"}